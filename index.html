<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
  <title>Timer</title>
  <link rel="stylesheet" href="./css/animate.css">
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/vue.min.js"></script>
  <script src="./js/selector.js"></script> 
</head>
<body>
  <div id="app">
    <div class="top">
      <button class="btn btn-close" @click="close"></button>
      <span class="inpine-helper"></span>
    </div>
    <div class="list-box">
      <ul class="list">
       
        <li class="item" v-for="(item, index) in items">  
          <transition name="custom-classes-transition"
          leave-active-class="animated bounceOutRight"
          v-on:after-leave="removeItem(index)">
            <item-compo v-bind:item="item" v-bind:index="index" v-if="item.show"></item-compo>
          </transition>  
        </li>
      </ul>
    </div>
    

    <div class="static-grid static-grid-form">
      <div class="static-grid-cell">
        <div>
<<<<<<< HEAD
          <input type="text" v-model="msg">
=======
          <input type="text" v-model="msg" @keydown.enter="addItem">
>>>>>>> a65b1cd6a10c19ebea937b9f9f550a847943e99f
        </div>
      </div>
      <div class="static-grid-cell static-grid-cell-btns">
        <div>
          <button class="btn btn-add" @click="addItem"></button>
        </div>
      </div>
    </div>
          
  </div>
  
<<<<<<< HEAD
  <script>
    var getCurrentWindow = getCurrentWindow || function(){}
    var require = require || function(){return {remote:getCurrentWindow }};
    
    const remote = require('electron').remote;

    function minimize(){
      var window = remote.getCurrentWindow();
      window.minimize();  
    }

    function close(){
      var window = remote.getCurrentWindow();
      window.close();  
    }
    var app = new Vue({
      el: '#app',
      data: {
        msg: '',
        items: []
      },
      methods: {
        close: function () {
           close();
        },
        resumeItem: function (itemIndex) {
          this.items[itemIndex].start();
        },
        
        pauseItem: function (itemIndex) {
          this.items[itemIndex].stop();
        },
        
        secondsToTimeString: function(seconds){
          var d = Math.floor(seconds / 86400);
          seconds -= 86400 * d;
          var h = Math.floor(seconds / 3600);
          seconds -= 3600 * h;
          var m = Math.floor(seconds / 60);
          seconds -= 60 * m;
          str = '';
          if(d > 0) { 
            d = (10 > d)? '0' + d : d;
            str += `${d}d `; 
          }
          if(h > 0) { 
            d = (10 > h)? '0' + h : h;
            str += `${h}h `; 
          }
          if(m > 0) { 
            m = (10 > m)? '0' + m : m;
            str += `${m}m `; 
          }
          seconds = (10 > seconds)? '0' + seconds : seconds;
          str += `${seconds}s `;
          
          return str;
        },
        
        addItem: function() {
          var that = this;
          var Item = function (){
            this.startTime = new Date();
            this.durationTime = 0;
            this.msg= that.msg;
            this.timer = null;
            this.show = true;
          };
          Item.prototype.start = function(){
            var that = this;
            that.timer = setInterval(function(){
              that.durationTime ++;
            }, 1000); 
          };
          Item.prototype.stop = function(){
            clearInterval(this.timer);
            this.timer = null;
          };
          var newItem = new Item();
          this.items.push(newItem);
          newItem.start();
          that.msg = '';
        },
        removeItem: function(itemIndex) {
          this.items[itemIndex].stop();
          this.items.splice(itemIndex, 1);
        }
      },
      
      mounted: function() {
      }
    });
=======
  <script type="x-template" id="item-compo-tmpl"> 
    <div class="static-grid">
      <div class="static-grid-cell static-grid-cell-msg" >
        <p class="static-grid-cell-msg-time">
          <span @click="$parent.copyClick">{{ $parent.secondsToTimeString(item.durationTime) }}</span>
        </p>
        <span>{{ item.msg }}</span>
      </div>
      <div class="static-grid-cell static-grid-cell-btn">
        <button @click="$parent.pauseItem(index)" class="btn btn-pause btn-mini" v-if="item.timer"></button>
        <button @click="$parent.resumeItem(index)" class="btn btn-play btn-mini" v-else></button>
        <button @click="item.show = false" class="btn btn-delete btn-mini"></button>
      </div>
    </div>
>>>>>>> a65b1cd6a10c19ebea937b9f9f550a847943e99f
  </script>
  
  <script src="js/script.js"></script>
</body>
</html>
